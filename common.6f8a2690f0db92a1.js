"use strict";(self.webpackChunkbabiChechaDashboard=self.webpackChunkbabiChechaDashboard||[]).push([[592],{6973:(p,_,o)=>{o.d(_,{h:()=>A});var n=o(4006),u=o(5412),t=o(4650),a=o(4853),h=o(2018),s=o(6895);function g(l,d){1&l&&(t.TgZ(0,"div",16)(1,"div",17)(2,"div",18),t._UZ(3,"span")(4,"span"),t.qZA()()())}function f(l,d){if(1&l&&(t.TgZ(0,"div",19),t._UZ(1,"input",20),t.TgZ(2,"label",21),t._uU(3),t.qZA()()),2&l){const e=d.$implicit,i=d.index;t.xp6(1),t.Q6J("id","module_"+e.id)("formControlName",i),t.xp6(1),t.Q6J("for","module_"+e.id),t.xp6(1),t.Oqu(e.name)}}function T(l,d){1&l&&(t.TgZ(0,"td"),t._uU(1," No Tenant Access"),t.qZA())}function v(l,d){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td",22),t._uU(2," Tenant Access "),t._UZ(3,"i",23),t.qZA(),t.TgZ(4,"td")(5,"div",19)(6,"input",24),t.NdJ("select",function(){const r=t.CHM(e).$implicit;return t.KtG(null==r?null:r.id)}),t.qZA(),t.TgZ(7,"label",25),t._uU(8),t.qZA()()(),t.YNc(9,T,2,0,"td",26),t.qZA()}if(2&l){const e=d.$implicit;t.xp6(6),t.Q6J("value",null==e?null:e.id)("checked",null==e?null:e.id),t.xp6(2),t.hij(" ",null==e?null:e.name," "),t.xp6(1),t.Q6J("ngIf",null==e)}}let A=(()=>{class l{constructor(e,i,m,r,c,M){this.fb=e,this.serv=i,this.data=m,this.toaster=r,this.dialog=c,this.matDialog=M,this.tenanstModule=[],this.showTenanstModule=[],this.loader=!1,this.selectedPermissions=[]}ngOnInit(){this.createFormEdit(),this.getAllTenantsModule(),this.getTenantsModule()}createFormEdit(){this.formEdit=this.fb.group({tenantId:[this.data?.id||"",n.kI.required],moduleIds:this.fb.array(this.tenanstModule.map(()=>this.fb.control(!1)))})}getAllTenantsModule(){this.loader=!0,this.serv.showTenantsModule().subscribe(e=>{this.tenanstModule=e.data,this.loader=!1,this.createFormEdit()},e=>{this.loader=!1})}getTenantsModule(){this.loader=!0,this.serv.getTenantsModule(this.data.id).subscribe(e=>{this.showTenanstModule=e.data,this.loader=!1,this.createFormEdit()},e=>{this.loader=!1})}update(){if(this.loader=!0,!this.formEdit)return;const m={moduleIds:this.formEdit.value.moduleIds.map((r,c)=>r?this.tenanstModule[c].id:null).filter(r=>null!==r),tenantId:this.formEdit.value.tenantId};this.serv.updateTenantsModule(m).subscribe(r=>{this.dialog.close(!0),this.loader=!1;let c=new Audio;c.src="../../../assets/notification-sound/login.wav",c.load(),c.play(),this.toaster.success("updated successfully","",{closeButton:!0,progressBar:!0,timeOut:3e3})},r=>{this.loader=!1})}close(){this.matDialog.closeAll()}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(n.qu),t.Y36(a.P),t.Y36(u.WI),t.Y36(h._W),t.Y36(u.so),t.Y36(u.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-assignmentmodules"]],decls:22,vars:4,consts:[["class","preloader",4,"ngIf"],[1,"col-md-12"],[1,"card","mb-4",2,"height","620px"],[1,"card-body",3,"formGroup"],["type","text","hidden","","formControlName","tenantId"],[1,"mt-2","mb-3"],["for","largeSelect",1,"form-label"],["formArrayName","moduleIds"],["class","form-check",4,"ngFor","ngForOf"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-flush-spacing"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],["type","button",1,"btn","btn-success","waves-effect","waves-light",3,"click"],["type","reset",1,"btn","btn-danger","waves-effect","waves-light",3,"click"],[1,"preloader"],[1,"preloader-inner"],[1,"preloader-icon"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"],[1,"text-nowrap","fw-semibold"],["data-bs-toggle","tooltip","data-bs-placement","top","aria-label","Allows a full access to the system","data-bs-original-title","Allows a full access to the system",1,"ti","ti-info-circle"],["disabled","","type","checkbox","id","item?.id",1,"form-check-input",3,"value","checked","select"],["for","selectAll",1,"form-check-label"],[4,"ngIf"]],template:function(e,i){1&e&&(t.YNc(0,g,5,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"form",3),t._UZ(4,"input",4),t.TgZ(5,"div",5)(6,"label",6),t._uU(7,"Select Module"),t.qZA(),t.TgZ(8,"div",7),t.YNc(9,f,4,4,"div",8),t.qZA()(),t.TgZ(10,"div",9)(11,"h5"),t._uU(12,"Access"),t.qZA(),t.TgZ(13,"div",10)(14,"table",11)(15,"tbody"),t.YNc(16,v,10,4,"tr",12),t.qZA()()()(),t.TgZ(17,"div",13)(18,"button",14),t.NdJ("click",function(){return i.update()}),t._uU(19,"Update"),t.qZA(),t.TgZ(20,"button",15),t.NdJ("click",function(){return i.close()}),t._uU(21,"Cancel"),t.qZA()()()()()),2&e&&(t.Q6J("ngIf",i.loader),t.xp6(3),t.Q6J("formGroup",i.formEdit),t.xp6(6),t.Q6J("ngForOf",i.tenanstModule),t.xp6(7),t.Q6J("ngForOf",i.showTenanstModule))},dependencies:[s.sg,s.O5,n._Y,n.Fj,n.Wl,n.JJ,n.JL,n.sg,n.u,n.CE],styles:[".toast-progress[_ngcontent-%COMP%]{background:linear-gradient(to right,#4caf50,#81c784);transition:width .5s ease-in-out}"]}),l})()},6349:(p,_,o)=>{o.d(_,{J:()=>t});var n=o(4650),u=o(529);let t=(()=>{class a{constructor(s){this.http=s}getAllTenants(){return this.http.get("http://108.181.201.213:7080/api/Tenants/AllTenants")}ChangeActivationTenants(s){return this.http.post("http://108.181.201.213:7080/api/Tenants/ChangeActivation",s)}showDetalisTenants(s){return this.http.get(`http://108.181.201.213:7080/api/Tenants/TenantDetails?id=${s}`)}}return a.\u0275fac=function(s){return new(s||a)(n.LFG(u.eN))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},4853:(p,_,o)=>{o.d(_,{P:()=>t});var n=o(4650),u=o(529);let t=(()=>{class a{constructor(s){this.http=s}showTenantsModule(){return this.http.get("http://108.181.201.213:7080/api/ModulesAssignments/modules")}getTenantsModule(s){return this.http.get(`http://108.181.201.213:7080/api/ModulesAssignments/tenant/${s}`)}updateTenantsModule(s){return this.http.put("http://108.181.201.213:7080/api/ModulesAssignments/edit",s)}}return a.\u0275fac=function(s){return new(s||a)(n.LFG(u.eN))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);